!function(t,e){if("function"==typeof define&&define.amd)define(["me-tools","me-lock-view","me-show-transition","me-trap-focus"],e);else if("object"==typeof exports){var o=require("me-tools"),r=require("me-lock-view"),i=require("me-show-transition"),n=require("me-trap-focus");"object"==typeof module?module.exports=e(o,r,i,n):exports.meDialog=e(o,r,i,n)}else t.meDialog=e(t.meTools,t.meLockView,t.meShowTransition,t.meTrapFocus)}(this,function(t,e,o,r){function i(e,o){var r=this;n.call(r).options=t.mergeObjects(D,o),a.call(r,e)}function n(){var t=this;return t.shown=!1,t.options={},t.container=null,t.backdrop=null,t.trigger=null,t.meTrapFocus=null,t.mainShowTransition=null,t.backdropShowTransition=null,t.keepBackdrop=!1,t}function a(t){var e=this,o=e.options;return e.container=c.call(e,t),o.modal&&(e.backdrop=s.call(e)),l.call(e),d.call(e),u.call(e),f.call(e),p.call(e),e}function c(e){var o=this,r=t.getElementById(e);if(!r)throw q+": Container element not found";return r.setAttribute("role","dialog"),t.registerEvent(o,r,"click",function(t){v.call(o,t)}),t.registerEvent(o,r,"keydown",function(t){T.call(o,t)}),t.registerEvent(o,r,"showdialog",function(t){w.call(o,t.detail)}),t.registerEvent(o,r,"hidedialog",function(t){k.call(o)}),r}function s(){var e=this,r=e.options,i=e.container,n=r.backdrop,a=!1;if("string"==typeof n?a=i.querySelector(n):n&&"object"==typeof n&&"undefined"!=typeof n.tagName&&(a=n),!a)throw q+": Backdrop element not found";if(a.setAttribute("tabindex","-1"),t.registerEvent(e,a,"click",function(t){S.call(e,t.target)}),!t.isParent(e.container,a)){var c=t.copyValues(e.options);c.callbacks={},a.data&&a.data[q]&&a.data[q].transition?(e.backdropShowTransition=a.data[q].transition,a.data[q].assignedTransitions++):(e.backdropShowTransition=new o(a,c),a.data=a.data||{},a.data[q]=a.data[q]||{},a.data[q].transition=e.backdropShowTransition,a.data[q].assignedTransitions=1)}return a}function l(){var e=this,o=e.options,r=e.container,i=o.label,n=!1;if("string"==typeof i?n=r.querySelector(i):"object"==typeof i&&"undefined"!=typeof i.tagName&&(n=i),n)r.setAttribute("aria-labelledby",t.getId(n,o.idPrefix));else{if("string"!=typeof i)throw q+": Label element not found";r.setAttribute("aria-label",i)}return e}function d(){for(var e=this,o=e.container.querySelectorAll(e.options.closeSelector),r=function(){this.className.indexOf(e.options.keepBackdropIndicator)!==-1&&(e.keepBackdrop=!0),b.call(e)},i=0;i<o.length;i++)t.registerEvent(e,o[i],"click",r);return e}function u(){var t=this,e=t.container;t.meTrapFocus=new r(e,t.options);var o=e.getAttribute("tabindex");return o||0===o||(e.setAttribute("data-tabindexed","true"),e.setAttribute("tabindex","-1")),t}function f(){function r(t,e){u[e]&&(t.backdrop=l.backdrop,t.trigger=l.trigger,u[e](t))}function i(t){return function(e){r(e,t)}}function n(t){r(t,"beforeShow"),l.backdropShowTransition&&l.backdropShowTransition.show(t.immediate),d.lockView&&e.lock(),l.trigger&&l.trigger.setAttribute("aria-expanded","true"),l.container.setAttribute("aria-hidden","false")}function a(t){l.meTrapFocus.update(),H.call(l),r(t,"afterShow")}function c(t){r(t,"beforeHide"),l.backdropShowTransition&&!l.keepBackdrop&&l.backdropShowTransition.hide(t.immediate),l.trigger&&(l.trigger.setAttribute("aria-expanded","false"),x.call(A.call(l)))}function s(t){m.call(l),d.lockView&&e.unlock(!l.keepBackdrop),l.keepBackdrop=!1,l.container.setAttribute("aria-hidden","true"),r(t,"afterHide")}var l=this,d=l.options,u=d.callbacks,f=t.copyValues(d);return f.callbacks={},f.callbacks={beforeShow:n,beforeShowTransition:i("beforeShowTransition"),afterShowTransition:i("afterShowTransition"),afterShow:a,beforeHide:c,beforeHideTransition:i("beforeHideTransition"),afterHideTransition:i("afterHideTransition"),afterHide:s},l.mainShowTransition=new o(l.container,f),l}function p(){for(var e=this,o=t.getId(e.container,e.options.idPrefix),r=document.querySelectorAll("["+C+'="'+o+'"]'),i=0;i<r.length;i++){var n=r[i];n.setAttribute("aria-controls",o),t.registerEvent(e,n,"click",e.show.bind(e,n))}return e}function h(t,e){return g.call(this,e),this.mainShowTransition.show(t),this}function b(t){return this.mainShowTransition.hide(t),this}function g(t){var e=this;return t&&e.container.setAttribute(e.options.viewPropsAttribute,t),e}function m(){var t=this;return t.container.removeAttribute(t.options.viewPropsAttribute),t}function w(t){this.show(t.trigger)}function k(){this.hide()}function v(t){var e=this;e.options}function T(t){if(!t.ctrlKey&&!t.altKey){var e=t.keyCode?t.keyCode:t.which;this.options.requireConfirm||e!=B||(b.call(this),t.stopPropagation())}}function S(t){var e=this;return e.backdrop==t&&(e.options.closeOnBackdrop?b.call(e):e.container.focus()),e}function y(t){return this.trigger=t,this}function A(){var t=this;return t.trigger&&t.trigger.focus(),t}function x(){return this.trigger=null,this}function H(){var t=this,e=t.options,o=e.customHandler.focus,r=null,i=t.meTrapFocus.getTabable();if("function"==typeof o&&(r=o(t.container)),!r)for(var n=0;n<i.length;n++)if(!i[n].matches(e.closeSelector)){r=i[n];break}!r&&i.length&&(r=i[0]),(r||(i.length?i[0]:t.container)).focus()}function E(){for(var t=document.querySelectorAll("["+P+"]"),e=0;e<t.length;e++)new i(t[e])}var q="meDialog",B=27,P="data-me-dialog",C="data-me-show-dialog",D={modal:!0,backdrop:".me-backdrop",closeOnBackdrop:!1,label:".me-label",closeSelector:".me-close",keepBackdropIndicator:"me-keep-backdrop",requireConfirm:!1,viewPropsAttribute:"data-view-props",customHandler:{focus:!1},callbacks:{beforeShow:!1,beforeShowTransition:!1,afterShowTransition:!1,afterShow:!1,beforeHide:!1,beforeHideTransition:!1,afterHideTransition:!1,afterHide:!1},lockView:!0,idPrefix:"id-"};return i.prototype.show=function(){for(var t,e,o,r=this,i=0;i<arguments.length;i++){var n=arguments[i],a=typeof n;"boolean"===a?e=n:"string"===a?o=n:"object"===a&&(n.tagName?t=n:n.preventDefault&&n.preventDefault())}return t&&y.call(r,t),h.call(r,e,o)},i.prototype.hide=function(){return b.call(this)},i.prototype.update=function(){return this.meTrapFocus.update(),this},i.prototype.canShow=function(){return this.mainShowTransition.canShow()},i.prototype.destroy=function(){var e=this,o=e.container;return o.removeAttribute("role"),o.removeAttribute("aria-hidden"),o.removeAttribute("aria-labelledby"),o.removeAttribute("aria-label"),e.backdrop.removeAttribute("tabindex"),o.getAttribute("data-tabindexed")&&(o.removeAttribute("data-tabindexed"),o.removeAttribute("tabindex")),e.trigger&&e.trigger.removeAttribute("aria-expanded"),t.unregisterEvent(e),e.meTrapFocus.destroy(),e.mainShowTransition.destroy(),e.backdropShowTransition&&(e.backdrop.data[q].assignedTransitions>1?e.backdrop.data[q].assignedTransitions--:e.backdropShowTransition.destroy()),n.call(e),null},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?E():window.addEventListener("DOMContentLoaded",function F(){window.removeEventListener("DOMContentLoaded",F),E()}),i});
/**
 * @license me-dialog 3.0.0 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-dialog for details
 */

//# sourceMappingURL=me-dialog.min.js.map

/**
 * @license me-dialog 3.0.0 Copyright (c) Mandana Eibegger <scripts@schoener.at>
 * Available via the MIT license.
 * see: https://github.com/meibegger/me-dialog for details
 */
